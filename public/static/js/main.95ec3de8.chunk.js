(window.webpackJsonpnode_with_react=window.webpackJsonpnode_with_react||[]).push([[0],{41:function(e,t,a){e.exports=a(69)},46:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),s=a.n(r);a(46),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(2),c=a(3),l=a(5),u=a(4),m=a(6),p=a(11),h=a(18),d=a(16),b=a(15),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"login",className:"label"+this.props.class},"Login"),o.a.createElement("input",{type:"text",id:"login",name:"login",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.login}))}}]),t}(o.a.Component),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"password",className:"label"+this.props.class},"Password"),o.a.createElement("input",{type:"password",id:"password",name:"password",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.password}))}}]),t}(o.a.Component),O=a(7),E=a.n(O),j="CHANGE_LOGIN",v="CHANGE_PASSWORD",y="SIGN_IN_SUCCESS",N="SIGN_IN_REQUEST",k="SIGN_IN_FAILED",_="SIGN_OUT",w="SIGN_IN_WITH_TOKEN_REQUEST",C="SIGN_IN_WITH_TOKEN_SUCCESS",S="SIGN_IN_WITH_TOKEN_FAILED",I=a(25),z=a.n(I);var F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(h.b,{exact:this.props.exact,className:"nav__link",activeClassName:"nav__link__active",to:this.props.link},this.props.name)}}]),t}(o.a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("nav",{className:"nav-bar"},o.a.createElement("div",{className:"nav-bar__container"},o.a.createElement(F,{exact:!0,link:"/",name:"Home page"}),o.a.createElement(F,{link:"/login",name:"Login"}),o.a.createElement(F,{link:"/authenticated",name:"Authenticated"})))}}]),t}(o.a.Component),L=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:"/react-gif.gif",alt:""}))}}]),t}(o.a.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"footer--logo"},o.a.createElement("img",{src:"/logo192.png",alt:""})),o.a.createElement("div",{className:"footer--content"},o.a.createElement("p",null,"\xa9 design by Infernet")))}}]),t}(o.a.Component),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.signIn({login:this.props.login,password:this.props.password})}},{key:"render",value:function(){var e=this.props,t=e.setLogin,a=e.setPassword,n=e.login,r=e.password,s=e.isFetching,i=e.message;return o.a.createElement("div",null,o.a.createElement(L,null),o.a.createElement(T,null),o.a.createElement("div",{className:"authorization-body"},o.a.createElement("div",{className:"authorization__title"},o.a.createElement("h3",null,"Login Page")),o.a.createElement("div",{className:"authorization__content"},o.a.createElement("form",{className:"authorization__content--form",onSubmit:this.handleSubmit},o.a.createElement(g,{login:n,setValue:t,class:"Login"}),o.a.createElement(f,{password:r,class:"Password",setValue:a}),o.a.createElement("button",{type:"submit"},"sign in")),o.a.createElement("div",{className:"authorization__content--status"},o.a.createElement("p",null,"Login: ",n),o.a.createElement("p",null,"Password: ",r),s?o.a.createElement("p",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node.js..."):o.a.createElement("p",null,i)))),o.a.createElement(G,null))}}]),t}(o.a.Component);R.propsTypes={isFetching:E.a.bool.isRequired,message:E.a.string,login:E.a.string.isRequired,password:E.a.string.isRequired,setLogin:E.a.func.isRequired,setPassword:E.a.func.isRequired};var q=Object(p.b)(function(e){return console.log(e),{login:e.authorization.login,password:e.authorization.password,isFetching:e.authorization.isFetching,message:e.authorization.message}},function(e){return{setLogin:function(t){return e(function(e){return{type:j,payload:e}}(t))},setPassword:function(t){return e(function(e){return{type:v,payload:e}}(t))},signIn:function(t){return e(function(e){return function(t){t({type:N,payload:e}),z.a.post("/request/login",{login:e.login,password:e.password}).then(function(e){if(400===e.status)throw new Error;localStorage.setItem("token",e.data.token),t({type:y,payload:{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430",token:e.data.token}})}).catch(function(e){t({type:k,payload:{message:e.toString()}})})}}(t))}}})(R),A=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.class.container},o.a.createElement("p",{className:this.props.class.title},this.props.title),o.a.createElement("p",{className:this.props.class.content},this.props.content))}}]),t}(o.a.Component),P=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.store,t={container:"home__content--container",title:"home__content--title",content:"home__content--content"};return o.a.createElement("div",null,o.a.createElement(L,null),o.a.createElement(T,null),o.a.createElement("div",{className:"home-body"},o.a.createElement("div",{className:"home__title"},o.a.createElement("h3",null,"Home page")),o.a.createElement("div",{className:"home__content"},null!==e.authorization.token?Object.keys(e.authorization).map(function(a){if("token"!==a&&""!==e.authorization[a])return o.a.createElement(A,{key:a,class:t,title:a+":",content:e.authorization[a]})}):o.a.createElement(A,{class:t,title:"\u041e\u0448\u0438\u0431\u043a\u0430:",content:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"}))),o.a.createElement(G,null))}}]),t}(o.a.Component),H=Object(p.b)(function(e){return{store:e}})(P),x=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",null,o.a.createElement(L,null),o.a.createElement(T,null),o.a.createElement("div",{className:"authenticated-body"},o.a.createElement("div",{className:"authenticated--title"},o.a.createElement("h3",null,"Authenticated page")),o.a.createElement("ul",{className:"authenticated--content"},Object.keys(e.authorization).map(function(t){if("token"!==t)return o.a.createElement("li",{key:t},t,": ",e.authorization[t])})),o.a.createElement("button",{className:"authenticated--button",onClick:this.props.signOut},"Log out")),o.a.createElement(G,null))}}]),t}(o.a.Component),W=Object(p.b)(function(e){return{store:e}},function(e){return{signOut:function(){return e((localStorage.removeItem("token"),{type:_}))}}})(x),U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/",exact:!0,component:H}),null!==this.props.store.token?o.a.createElement(d.a,{from:"/login",to:"/authenticated"}):o.a.createElement(d.a,{from:"/authenticated",to:"/login"}),o.a.createElement(d.b,{path:"/login",component:q}),o.a.createElement(d.b,{path:"/authenticated",component:W}))}}]),t}(o.a.Component),D=Object(p.b)(function(e){return{store:e.authorization}})(U),V=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e)),null!==localStorage.getItem("token")&&null===a.props.store.authorization.token&&a.props.bearerToken(localStorage.getItem("token")),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(D,null))}}]),t}(o.a.Component);V.propsTypes={store:E.a.object.isRequired};var B=Object(p.b)(function(e){return{store:e}},function(e){return{bearerToken:function(t){return e(function(e){return function(t){t({type:w}),z.a.post("/request/token",{},{headers:{Authorization:"Bearer "+e}}).then(function(a){if(400===a.status)throw new Error;t({type:C,payload:{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430",login:a.data.login,token:e}})}).catch(function(e){localStorage.removeItem("token"),t({type:S,payload:{message:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0438\u043b\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0442\u043e\u043a\u0435\u043d"}})})}}(t))}}})(V),J=a(17),K={id:null,login:"",password:"",firstName:"",lastName:"",email:"",isFetching:!1,token:null,message:""};var Q=Object(J.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object.assign({},e,{login:t.payload});case v:return Object.assign({},e,{password:t.payload});case N:return Object.assign({},e,{login:t.payload.login,password:t.payload.password,isFetching:!1,message:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node..."});case y:return Object.assign({},e,{message:t.payload.message,isFetching:!1,token:t.payload.token});case k:return Object.assign({},e,{message:t.payload.message,isFetching:!1});case _:return Object.assign({},K);case w:return Object.assign({},e,{isFetching:!1,message:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node..."});case C:var a=JSON.parse(atob(t.payload.token.split(".")[1]));return Object.assign({},e,{id:a.id,message:t.payload.message,isFetching:!1,login:t.payload.login,password:a.password,firstName:a.firstName,lastName:null!==a.lastName?a.lastName:"",email:a.email,token:t.payload.token});case S:return Object.assign({},e,{message:t.payload.message,isFetching:!1});default:return e}}}),$=a(39),M=a.n($),X=a(40),Y=Object(J.d)(Q,Object(J.a)(X.a,M.a));s.a.render(o.a.createElement(p.a,{store:Y},o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.95ec3de8.chunk.js.map