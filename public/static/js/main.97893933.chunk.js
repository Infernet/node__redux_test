(window.webpackJsonpnode_with_react=window.webpackJsonpnode_with_react||[]).push([[0],{41:function(e,t,a){e.exports=a(70)},46:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),c=a.n(r);a(46),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(2),i=a(3),l=a(5),u=a(4),m=a(6),p=a(11),h=a(18),d=a(16),g=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(h.b,{exact:this.props.exact,className:"nav__link",activeClassName:"nav__link__active",to:this.props.link},this.props.name)}}]),t}(o.a.Component),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("nav",{className:"nav-bar"},o.a.createElement("div",{className:"nav-bar__container"},o.a.createElement(g,{exact:!0,link:"/",name:"Home page"}),o.a.createElement(g,{link:"/login",name:"Login"}),o.a.createElement(g,{link:"/authenticated",name:"Authenticated"})))}}]),t}(o.a.Component),E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:"/react-gif.gif",alt:""}))}}]),t}(o.a.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"footer--logo"},o.a.createElement("img",{src:"/logo192.png",alt:""})),o.a.createElement("div",{className:"footer--content"},o.a.createElement("p",null,"\xa9 design by Infernet")))}}]),t}(o.a.Component),f=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store,t=Object.keys(this.props.store.authorization);return o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement(b,null),o.a.createElement("div",{className:"home-body"},o.a.createElement("div",{className:"home__title"},o.a.createElement("h3",null,"Home page")),o.a.createElement("div",{className:"home__content"},t.map(function(t){return o.a.createElement("div",{className:"home__content--container",key:t},o.a.createElement("p",{className:"home__content--title"},t),o.a.createElement("p",{className:"home__content--content"},e.authorization[t]))}))),o.a.createElement(O,null))}}]),t}(o.a.Component),j=Object(p.b)(function(e){return{store:e}})(f),v="CHANGE_LOGIN",y="CHANGE_PASSWORD",k="SIGN_IN_SUCCESS",N="SIGN_IN_REQUEST",_="SIGN_IN_FAILED",w="SIGN_OUT",I="SIGN_IN_WITH_TOKEN_REQUEST",S="SIGN_IN_WITH_TOKEN_SUCCESS",C="SIGN_IN_WITH_TOKEN_FAILED",F=a(27),z=a.n(F);var T=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement(b,null),o.a.createElement("div",{className:"authenticated-body"},o.a.createElement("div",{className:"authenticated--title"},o.a.createElement("h3",null,"Authenticated page")),o.a.createElement("ul",{className:"authenticated--content"},o.a.createElement("li",null,"Login: ",e.authorization.login),o.a.createElement("li",null,"Password: ",e.authorization.password),o.a.createElement("li",null,"isFetching: ",e.authorization.isFetching),o.a.createElement("li",null,"Message: ",e.authorization.message),o.a.createElement("li",{className:"authenticated--content--token"},"Token(store): ",e.authorization.token),o.a.createElement("li",{className:"authenticated--content--token"},"Token(localstorage): ",localStorage.getItem("token")?localStorage.getItem("token").toString():"")),o.a.createElement("button",{className:"authenticated--button",onClick:this.props.signOut},"Log out")),o.a.createElement(O,null))}}]),t}(o.a.Component),L=Object(p.b)(function(e){return{store:e}},function(e){return{signOut:function(){return e((localStorage.removeItem("token"),{type:w}))}}})(T),G=a(15),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(G.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"login",className:"label"+this.props.class},"Login"),o.a.createElement("input",{type:"text",id:"login",name:"login",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.login}))}}]),t}(o.a.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(G.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"password",className:"label"+this.props.class},"Password"),o.a.createElement("input",{type:"password",id:"password",name:"password",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.password}))}}]),t}(o.a.Component),H=a(7),x=a.n(H),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleForm=a.handleForm.bind(Object(G.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleForm",value:function(e){e.preventDefault(),this.props.signIn({login:this.props.store.login,password:this.props.store.password})}},{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement(b,null),o.a.createElement("div",{className:"authorization-body"},o.a.createElement("div",{className:"authorization__title"},o.a.createElement("h3",null,"Sign in")),o.a.createElement("div",{className:"authorization__content"},o.a.createElement("form",{action:"/login",method:"POST",className:"authorization__content--form",onSubmit:this.handleForm},o.a.createElement(A,{class:"Login",setValue:this.props.setLogin}),o.a.createElement(P,{class:"Password",setValue:this.props.setPassword}),o.a.createElement("button",{type:"submit"},"Sign in")),o.a.createElement("div",{className:"authorization__content--status"},o.a.createElement("p",null,"Login: ",e.login),o.a.createElement("p",null,"Password: ",e.password),e.isFetching?o.a.createElement("p",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node.js..."):o.a.createElement("p",null,e.message)))),o.a.createElement(O,null))}}]),t}(o.a.Component);W.propsTypes={store:x.a.object.isRequired};var R=Object(p.b)(function(e){return{store:e.authorization}},function(e){return{signIn:function(t){return e(function(e){return function(t){t({type:N,payload:e}),z.a.post("/login",{login:e.login,password:e.password}).then(function(e){if(400===e.status)throw new Error;localStorage.setItem("token",e.data.token),t({type:k,payload:{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430",token:e.data.token}})}).catch(function(e){t({type:_,payload:{message:e.toString()}})})}}(t))},setLogin:function(t){return e(function(e){return{type:v,payload:e}}(t))},setPassword:function(t){return e(function(e){return{type:y,payload:e}}(t))}}})(W),U=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(d.d,null,o.a.createElement(d.b,{exact:!0,path:"/",component:j}),null!==this.props.store.token?o.a.createElement(d.a,{from:"/login",to:"/authenticated"}):o.a.createElement(d.a,{from:"/authenticated",to:"/login"}),o.a.createElement(d.b,{path:"/login",component:R}),o.a.createElement(d.b,{path:"/authenticated",component:L}))}}]),t}(o.a.Component),D=Object(p.b)(function(e){return{store:e.authorization}})(U),V=(a(69),function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e)),null!==localStorage.getItem("token")&&null===a.props.store.authorization.token&&a.props.bearerToken(localStorage.getItem("token")),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(D,null))}}]),t}(o.a.Component));V.propsTypes={store:x.a.object.isRequired};var B=Object(p.b)(function(e){return{store:e}},function(e){return{bearerToken:function(t){return e(function(e){return function(t){t({type:I}),z.a.post("/login",{},{headers:{Authorization:"Bearer "+e}}).then(function(a){if(400===a.status)throw new Error;t({type:S,payload:{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430",login:a.data.login,token:e}})}).catch(function(e){localStorage.removeItem("token"),t({type:C,payload:{message:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0438\u043b\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0442\u043e\u043a\u0435\u043d"}})})}}(t))}}})(V),K=a(17),q={login:"",password:"",isFetching:!1,token:null,message:""};var J=Object(K.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{login:t.payload});case y:return Object.assign({},e,{password:t.payload});case N:return Object.assign({},e,{login:t.payload.login,password:t.payload.password,isFetching:!1,message:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node..."});case k:return Object.assign({},e,{message:t.payload.message,isFetching:!1,token:t.payload.token});case _:return Object.assign({},e,{message:t.payload.message,isFetching:!1});case w:return Object.assign({},e,{message:"",isFetching:!1,token:null});case I:return Object.assign({},e,{isFetching:!1,message:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node..."});case S:return Object.assign({},e,{message:t.payload.message,isFetching:!1,login:t.payload.login,token:t.payload.token});case C:return Object.assign({},e,{message:t.payload.message,isFetching:!1});default:return e}}}),Q=a(39),M=a.n(Q),$=a(40),X=Object(K.d)(J,Object(K.a)($.a,M.a));c.a.render(o.a.createElement(p.a,{store:X},o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.97893933.chunk.js.map