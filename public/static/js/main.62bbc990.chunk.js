(window.webpackJsonpnode_with_react=window.webpackJsonpnode_with_react||[]).push([[0],{41:function(e,t,a){e.exports=a(69)},46:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),c=a.n(r);a(46),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(2),i=a(3),l=a(5),u=a(4),m=a(6),p=a(11),h=a(15),d=a(17),b=a(16),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"login",className:"label"+this.props.class},"Login"),o.a.createElement("input",{type:"text",id:"login",name:"login",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.login}))}}]),t}(o.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"block"+this.props.class},o.a.createElement("label",{htmlFor:"password",className:"label"+this.props.class},"Password"),o.a.createElement("input",{type:"password",id:"password",name:"password",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.password}))}}]),t}(o.a.Component),E=a(7),j=a.n(E),f="CHECK_TOKEN",v="CHANGE_LOGIN",y="CHANGE_PASSWORD",k="SIGN_IN_SUCCESS",w="SIGN_IN_REQUEST",N="SIGN_IN_FAILED",_="SIGN_OUT",C=a(37),S=a.n(C);var z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(h.b,{exact:this.props.exact,className:"nav__link",activeClassName:"nav__link__active",to:this.props.link},this.props.name)}}]),t}(o.a.Component),I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("nav",{className:"nav-bar"},o.a.createElement("div",{className:"nav-bar__container"},o.a.createElement(z,{exact:!0,link:"/",name:"Home page"}),o.a.createElement(z,{link:"/login",name:"Login"}),o.a.createElement(z,{link:"/authenticated",name:"Authenticated"})))}}]),t}(o.a.Component),F=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:"/react-gif.gif",alt:""}))}}]),t}(o.a.Component),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"footer--logo"},o.a.createElement("img",{src:"/logo192.png",alt:""})),o.a.createElement("div",{className:"footer--content"},o.a.createElement("p",null,"\xa9 design by Infernet")))}}]),t}(o.a.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.signIn({login:this.props.login,password:this.props.password})}},{key:"render",value:function(){var e=this.props,t=e.setLogin,a=e.setPassword,n=e.login,r=e.password,c=e.isFetching,s=e.message;return o.a.createElement("div",null,o.a.createElement(F,null),o.a.createElement(I,null),o.a.createElement("div",{className:"authorization-body"},o.a.createElement("div",{className:"authorization__title"},o.a.createElement("h3",null,"Login Page")),o.a.createElement("div",{className:"authorization__content"},o.a.createElement("form",{className:"authorization__content--form",onSubmit:this.handleSubmit},o.a.createElement(g,{login:n,setValue:t,class:"Login"}),o.a.createElement(O,{password:this.props.password,class:"Password",setValue:a}),o.a.createElement("button",{type:"submit"},"sign in")),o.a.createElement("div",{className:"authorization__content--status"},o.a.createElement("p",null,"Login: ",n),o.a.createElement("p",null,"Password: ",r),c?o.a.createElement("p",null):o.a.createElement("p",null,s)))),o.a.createElement(L,null))}}]),t}(o.a.Component);T.propsTypes={isFetching:j.a.bool.isRequired,message:j.a.string};var P=Object(p.b)(function(e){return console.log(e),{login:e.authorization.login,password:e.authorization.password,isFetching:e.authorization.isFetching,message:e.authorization.message}},function(e){return{setLogin:function(t){return e(function(e){return{type:v,payload:e}}(t))},setPassword:function(t){return e(function(e){return{type:y,payload:e}}(t))},signIn:function(t){return e(function(e){return function(t){t({type:w,payload:e}),S.a.post("/login",{login:e.login,password:e.password},{headers:{Authorization:"Bearer \u0422\u041e\u041a\u0415\u041d"}}).then(function(e){if(400==e.status)throw new Error;localStorage.setItem("token",e.data.token),t({type:k,payload:{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430",token:e.data.token}})}).catch(function(e){t({type:N,payload:{message:e.toString()}})})}}(t))}}})(T),A=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.class.container},o.a.createElement("p",{className:this.props.class.title},this.props.title),o.a.createElement("p",{className:this.props.class.content},this.props.content))}}]),t}(o.a.Component),G=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store,t={container:"home__content--container",title:"home__content--title",content:"home__content--content"};return o.a.createElement("div",null,o.a.createElement(F,null),o.a.createElement(I,null),o.a.createElement("div",{className:"home-body"},o.a.createElement("div",{className:"home__title"},o.a.createElement("h3",null,"Home page")),o.a.createElement("div",{className:"home__content"},e.authorization.token>-1?Object.keys(e.authorization).map(function(a){return o.a.createElement(A,{key:a,class:t,title:a+":",content:e.authorization[a]})}):o.a.createElement(A,{class:t,title:"\u041e\u0448\u0438\u0431\u043a\u0430:",content:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"}))),o.a.createElement(L,null))}}]),t}(o.a.Component),x=Object(p.b)(function(e){return{store:e}})(G),H=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",null,o.a.createElement(F,null),o.a.createElement(I,null),o.a.createElement("div",{className:"authenticated-body"},o.a.createElement("div",{className:"authenticated--title"},o.a.createElement("h3",null,"Authenticated page")),o.a.createElement("ul",{className:"authenticated--content"},o.a.createElement("li",null,"Login: ",e.authorization.login),o.a.createElement("li",null,"Password: ",e.authorization.password),o.a.createElement("li",null,"isFetching: ",e.authorization.isFetching),o.a.createElement("li",null,"Message: ",e.authorization.message),o.a.createElement("li",null,"Token(store): ",e.authorization.token),o.a.createElement("li",null,"Token(localstorage): ",localStorage.getItem("token")?localStorage.getItem("token").toString():"")),o.a.createElement("button",{className:"authenticated--button",onClick:this.props.signOut},"Log out")),o.a.createElement(L,null))}}]),t}(o.a.Component),R=Object(p.b)(function(e){return{store:e}},function(e){return{signOut:function(){return e((localStorage.removeItem("token"),{type:_}))}}})(H),V=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/",exact:!0,component:x}),this.props.store.authorization.token>-1?o.a.createElement(d.a,{from:"/login",to:"/authenticated"}):o.a.createElement(d.a,{from:"/authenticated",to:"/login"}),o.a.createElement(d.b,{path:"/login",component:P}),o.a.createElement(d.b,{path:"/authenticated",component:R}))}}]),t}(o.a.Component),B=Object(p.b)(function(e){return{store:e}})(V),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.checkToken(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(B,null))}}]),t}(o.a.Component);D.propsTypes={store:j.a.object.isRequired};var U=Object(p.b)(function(e){return{store:e}},function(e){return{checkToken:function(){return e(function(){var e=localStorage.getItem("token");return{type:f,payload:e||-1}}())}}})(D),W=a(18),q={login:"",password:"",isFetching:!1,token:-1,message:""};var J=Object(W.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{login:t.payload});case y:return Object.assign({},e,{password:t.payload});case w:return Object.assign({},e,{login:t.payload.login,password:t.payload.password,isFetching:!1,message:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 Node..."});case k:return Object.assign({},e,{message:t.payload.message,isFetching:!1,token:t.payload.token});case N:return Object.assign({},e,{message:t.payload.message,isFetching:!1});case _:return Object.assign({},e,{message:"",isFetching:!1,token:-1});case f:return Object.assign({},e,{token:t.payload});default:return e}}}),K=a(39),M=a.n(K),Q=a(40),$=Object(W.d)(J,Object(W.a)(Q.a,M.a));c.a.render(o.a.createElement(p.a,{store:$},o.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.62bbc990.chunk.js.map