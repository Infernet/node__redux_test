(window.webpackJsonpnode_with_react=window.webpackJsonpnode_with_react||[]).push([[0],{42:function(e,t,n){e.exports=n(71)},47:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(22),o=n.n(s);n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(1),i=n(2),l=n(4),u=n(3),p=n(5),m=n(8),h=n(18),d=n(17),f=n(9),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=n.onChange.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return r.a.createElement("div",{className:"block"+this.props.class},r.a.createElement("label",{htmlFor:"login",className:"label"+this.props.class},"Login"),r.a.createElement("input",{type:"text",id:"login",name:"login",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.login,autoComplete:"false"}))}}]),t}(r.a.Component),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=n.onChange.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){return r.a.createElement("div",{className:"block"+this.props.class},r.a.createElement("label",{htmlFor:"password",className:"label"+this.props.class},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"input"+this.props.class,onChange:this.onChange,placeholder:this.props.password,autoComplete:"false"}))}}]),t}(r.a.Component),g=n(7),O=n.n(g),v="CHANGE_LOGIN",y="CHANGE_PASSWORD",j="SIGN_IN_SUCCESS",k="SIGN_IN_REQUEST",_="SIGN_IN_FAILED",S="SIGN_OUT",T="SIGN_OUT_TOKEN",N="RESTORE_TOKEN",C="CLEAR_TOKEN_DATA",U="AUTH_WITH_TOKEN_SUCCESS",I="AUTH_WITH_TOKEN_FAILED",w="REFRESH_TOKEN_SUCCESS",R="REFRESH_TOKEN_FAILED",A=n(14),L=n.n(A),D=n(20),q=n.n(D),P=n(19),z={id:null,role:0,login:"",password:""};var F="CLEAR_USER_DATA",G="GET_USERS_SUCCESS",H="GET_USERS_FAILED",B="CHANGE_USER",V="INSERT_USER_SUCCESS",x="INSERT_USER_FAILED",K="UPDATE_USER_SUCCESS",W="UPDATE_USER_FAILED",M="DELETE_USER_SUCCESS",J="DELETE_USER_FAILED",Q={selectedId:null,users:[],user:{id:"",login:"",role:"",email:"",firstName:"",lastName:""}};var Y={accessToken:null,refreshToken:null};var $=Object(P.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{login:t.payload});case y:return Object.assign({},e,{password:t.payload});case k:return e;case j:return Object.assign({},e,t.payload,{password:""});case _:return Object.assign({},e,t.payload);case S:return Object.assign({},z);default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:case w:case U:return Object.assign({},e,t.payload);case R:case I:case C:case T:return Object.assign({},Y);default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object.assign({},e,{selectedId:t.payload});case F:return Object.assign({},e,{user:Q.user});case G:case V:case K:case M:return Object.assign({},e,{users:t.payload});case x:case W:case J:case H:return Object.assign({},e,{users:Q.users});default:return e}}}),X=n(39),Z=n.n(X),ee=n(40),te=Object(P.d)($,Object(P.a)(ee.a,Z.a));var ne=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.b,{exact:this.props.exact,className:"nav__link",activeClassName:"nav__link__active",to:this.props.link},this.props.name)}}]),t}(r.a.Component),ae=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("div",{className:"nav-bar__container"},r.a.createElement(ne,{exact:!0,link:"/",name:"Home page"}),r.a.createElement(ne,{link:"/login",name:"Login"}),r.a.createElement(ne,{link:"/authenticated",name:"Authenticated"}),r.a.createElement(ne,{link:"/users",name:"User list"})))}}]),t}(r.a.Component),re=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"/react-gif.gif",alt:""}))}}]),t}(r.a.Component),se=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer--logo"},r.a.createElement("img",{src:"/logo192.png",alt:""})),r.a.createElement("div",{className:"footer--content"},r.a.createElement("p",null,"\xa9 design by Infernet")))}}]),t}(r.a.Component),oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.signIn({login:this.props.login,password:this.props.password})}},{key:"render",value:function(){var e=this.props,t=e.setLogin,n=e.setPassword,a=e.login,s=e.password;return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(ae,null),r.a.createElement("div",{className:"authorization-body"},r.a.createElement("div",{className:"authorization__title"},r.a.createElement("h3",null,"Login Page")),r.a.createElement("div",{className:"authorization__content"},r.a.createElement("form",{className:"authorization__content--form",onSubmit:this.handleSubmit},r.a.createElement(b,{login:a,setValue:t,class:"Login"}),r.a.createElement(E,{password:s,class:"Password",setValue:n}),r.a.createElement("button",{type:"submit"},"sign in")))),r.a.createElement(se,null))}}]),t}(r.a.Component);oe.propsTypes={login:O.a.string.isRequired,password:O.a.string.isRequired,setLogin:O.a.func.isRequired,setPassword:O.a.func.isRequired};var ce=Object(m.b)((function(e){return{login:e.user.login,password:e.user.password}}),(function(e){return{setLogin:function(t){return e(function(e){return{type:v,payload:e}}(t))},setPassword:function(t){return e(function(e){return{type:y,payload:e}}(t))},signIn:function(t){return e((function(e){var t=te.getState().user;q.a.getV18((function(n){L.a.post("/request/login/login-auth",{login:t.login,password:t.password,fingerPrint:n}).then((function(t){localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),e({type:j,payload:t.data.user}),e({type:U,payload:t.data.token})})).catch((function(t){return e({type:_})}))}))}))}}}))(oe),ie=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.class.container},r.a.createElement("p",{className:this.props.class.title},this.props.title),r.a.createElement("p",{className:this.props.class.content},this.props.content))}}]),t}(r.a.Component),le=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store,t={container:"home__content--container",title:"home__content--title",content:"home__content--content"};return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(ae,null),r.a.createElement("div",{className:"home-body"},r.a.createElement("div",{className:"home__title"},r.a.createElement("h3",null,"Home page")),r.a.createElement("div",{className:"home__content"},null!==e.token.accessToken?Object.keys(e.user).map((function(n){if("token"!==n&&""!==e.user[n])return r.a.createElement(ie,{key:n,class:t,title:n+":",content:e.user[n]})})):r.a.createElement(ie,{class:t,title:"\u041e\u0448\u0438\u0431\u043a\u0430:",content:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"}))),r.a.createElement(se,null))}}]),t}(r.a.Component),ue=Object(m.b)((function(e){return{store:e}}))(le),pe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store;return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(ae,null),r.a.createElement("div",{className:"authenticated-body"},r.a.createElement("div",{className:"authenticated--title"},r.a.createElement("h3",null,"Authenticated page")),r.a.createElement("ul",{className:"authenticated--content"},Object.keys(e.user).map((function(t){return"token"!==t&&r.a.createElement("li",{key:t},t,": ",e.user[t])}))),r.a.createElement("button",{className:"authenticated--button",onClick:this.props.signOut},"Log out")),r.a.createElement(se,null))}}]),t}(r.a.Component),me=Object(m.b)((function(e){return{store:e}}),(function(e){return{signOut:function(){return e((function(e){var t=te.getState().tokenAuth;q.a.getV18((function(n){L.a.post("/request/login/sign-out",{fingerPrint:n},{headers:{authorization:"Bearer "+t.refreshToken}}).finally((function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({type:S}),e({type:T})}))}))}))}}}))(pe);function he(){return function(e){var t=te.getState().token;q.a.getV18((function(n){L.a.post("/request/login/token-auth",{fingerPrint:n},{headers:{authorization:"Bearer "+t.accessToken}}).then((function(t){if(200!==t.status)throw new Error;e({type:U}),e({type:j,payload:t.data.user})})).catch((function(n){401===n.request.status&&null!==t.refreshToken?e(de(he)):(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({type:I}),e({type:S}))}))}))}}function de(e){return function(t){var n=te.getState().token;q.a.getV18((function(a){L.a.post("/request/login/refresh-token",{fingerPrint:a},{headers:{authorization:"Bearer "+n.refreshToken}}).then((function(n){localStorage.setItem("accessToken",n.data.accessToken),localStorage.setItem("refreshToken",n.data.refreshToken),t({type:w,payload:n.data}),t(e())})).catch((function(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t({type:R}),t({type:S})}))}))}}function fe(e){return{type:B,payload:e}}function be(){return function(e){var t=te.getState().token.accessToken;L.a.post("/request/user/get",{},{headers:{authorization:"Bearer "+t}}).then((function(t){return e({type:G,payload:t.data.users})})).catch((function(t){401===t.request.status?e(de(be)):e({type:H})}))}}function Ee(){return function(e){var t=te.getState().token.accessToken,n=te.getState().users;L.a.post("/request/user/insert",{user:n.user},{headers:{authorization:"Bearer "+t}}).then((function(t){e({type:V,payload:t.data.users}),e({type:F})})).catch((function(t){401===t.request.status?e(de(Ee)):e({type:x})}))}}function ge(){return function(e){var t=te.getState().token.accessToken,n=te.getState().users;L.a.post("/request/user/update",{user:n.user},{headers:{authorization:"Bearer "+t}}).then((function(t){e({type:K,payload:t.data.users}),e({type:F}),e(fe(null))})).catch((function(t){401===t.request.status?e(de(ge)):e({type:W})}))}}function Oe(){return function(e){var t=te.getState().token.accessToken,n=te.getState().users;L.a.post("/request/user/delete",{id:n.selectedId},{headers:{authorization:"Bearer "+t}}).then((function(t){e({type:M,payload:t.data.users}),e(fe(null))})).catch((function(t){401===t.request.status?e(de(Oe)):e({type:J})}))}}var ve=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onInsertUser=n.onInsertUser.bind(Object(f.a)(n)),n.onUpdateUser=n.onUpdateUser.bind(Object(f.a)(n)),n.onDeleteUser=n.onDeleteUser.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onInsertUser",value:function(e){}},{key:"onUpdateUser",value:function(e){}},{key:"onDeleteUser",value:function(e){}},{key:"render",value:function(){return r.a.createElement("div",{className:"users__control-panel--container"},r.a.createElement("button",{className:"users__control-panel--btn",onClick:this.onInsertUser},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("button",{className:"users__control-panel--btn",onClick:this.onUpdateUser},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("button",{className:"users__control-panel--btn",onClick:this.onDeleteUser},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))}}]),t}(r.a.Component);ve.propsTypes={user:O.a.object.isRequired};var ye=Object(m.b)((function(e){return{store:e.userList}}),(function(e){return{insertUser:function(){return e(Ee())},deleteUser:function(){return e(Oe())},updateUser:function(){return e(ge())}}}))(ve),je=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSelect=n.onSelect.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onSelect",value:function(e){e.preventDefault(),this.props.select(this.props.user.id)}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement(h.b,{to:"",onClick:this.onSelect,className:"users__list--item-container",activeClassName:"users__list--item--container__active"},Object.keys(e).map((function(t){return r.a.createElement("p",{className:"users__list--item-content",key:t},e[t])})))}}]),t}(r.a.Component);je.propsTypes={user:O.a.object.isRequired,select:O.a.func.isRequired};var ke=je,_e=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.store.users;return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(ae,null),t.length>0?r.a.createElement("div",{className:"users-body"},r.a.createElement(ye,{user:t[0]}),r.a.createElement("div",{className:"users__list-header"},Object.keys(t[0]).map((function(e){return r.a.createElement("p",{className:"users__list-header--title",key:e},e)}))),t.map((function(t){return r.a.createElement(ke,{user:t,key:t.id,select:e.props.selectUser})}))):r.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex"}},r.a.createElement("h1",{style:{color:"black",margin:"auto"}},"EMPTY RESULT")),r.a.createElement(se,null))}}]),t}(r.a.Component),Se=Object(m.b)((function(e){return{store:e.userList}}),(function(e){return{getUsers:function(){return e(be())},selectUser:function(t){return e(fe(t))}}}))(_e),Te=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.token.accessToken;return r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:ue}),null!==e?r.a.createElement(d.a,{from:"/login",to:"/authenticated"}):r.a.createElement(d.a,{from:"/authenticated",to:"/login"}),null===e&&r.a.createElement(d.a,{from:"/users",to:"/login"}),r.a.createElement(d.b,{path:"/login",component:ce}),r.a.createElement(d.b,{path:"/authenticated",component:me}),r.a.createElement(d.b,{path:"/users",component:Se}))}}]),t}(r.a.Component),Ne=Object(m.b)((function(e){return{token:e.token}}))(Te),Ce=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.token;null===e.accessToken&&null===e.refreshToken&&this.props.restoreToken()}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(Ne,null))}}]),t}(r.a.Component);Ce.propsTypes={user:O.a.object.isRequired};var Ue=Object(m.b)((function(e){return{user:e.user,token:e.token}}),(function(e){return{restoreToken:function(){return e((function(e){var t=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken");null!==t&&null!==n?(e({type:N,payload:{accessToken:t,refreshToken:n}}),e(he())):(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({type:S}),e({type:T}))}))}}}))(Ce);o.a.render(r.a.createElement(m.a,{store:te},r.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.4308398c.chunk.js.map